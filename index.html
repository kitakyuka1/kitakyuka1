<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ºëÊöáÊäΩÈÅ∏„Ç∑„Çπ„ÉÜ„É†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            text-align: center;
            padding: 30px 20px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .content {
            padding: 30px;
        }
        
        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .date-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .date-selector {
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .date-selector:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }
        
        .date-selector.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        .shift-options {
            margin-top: 10px;
            display: none;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .shift-options.show {
            display: flex;
        }
        
        .shift-option {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .shift-option input[type="radio"] {
            margin-right: 8px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #868e96 0%, #495057 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-filter input, .search-filter select {
            flex: 1;
            min-width: 150px;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .status-winner {
            background: #d4edda;
            color: #155724;
        }
        
        .status-waiting {
            background: #fff3cd;
            color: #856404;
        }
        
        .admin-login {
            max-width: 400px;
            margin: 0 auto;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
        }
        
        .back-btn {
            background: #6c757d;
            margin-bottom: 20px;
        }
        
        .alert {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        
        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }
        
        .alert-error {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .selection-counter {
            background: #e9ecef;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            color: #495057;
        }
        
        .admin-section {
            display: none;
        }
        
        .date-management {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .date-range-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            margin-bottom: 15px;
            align-items: end;
        }
        
        .available-dates {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }
        
        .date-item {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f3f4;
        }
        
        .date-item:last-child {
            border-bottom: none;
        }
        
        .date-item .date-info {
            flex-grow: 1;
        }
        
        .date-item .date-actions {
            display: flex;
            gap: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ ‰ºëÊöáÊäΩÈÅ∏„Ç∑„Çπ„ÉÜ„É†</h1>
            <p>ÂÖ¨Âπ≥„Å™ÊäΩÈÅ∏„Åß‰ºëÊöá„ÇíÊ±∫ÂÆö„Åó„Åæ„Åô</p>
        </div>
        
        <div class="content">
            <!-- „Éà„ÉÉ„ÉóÁîªÈù¢ -->
            <div id="home-screen" class="screen active">
                <div class="nav-buttons">
                    <button class="nav-btn" onclick="showScreen('apply-screen')">
                        üìù ÊäΩÈÅ∏Áî≥„ÅóËæº„Åø
                    </button>
                    <button class="nav-btn" onclick="showScreen('view-screen')">
                        üëÄ ÂøúÂãüÁä∂Ê≥ÅÁ¢∫Ë™ç
                    </button>
                    <button class="nav-btn" onclick="showScreen('result-screen')">
                        üéä ÁµêÊûúË°®Á§∫
                    </button>
                    <button class="nav-btn" onclick="showScreen('admin-login-screen')">
                        üîí ÁÆ°ÁêÜËÄÖÁîªÈù¢
                    </button>
                </div>
            </div>
            
            <!-- ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥ÁîªÈù¢ -->
            <div id="admin-login-screen" class="screen">
                <button class="btn back-btn" onclick="showScreen('home-screen')">‚Üê Êàª„Çã</button>
                <div class="admin-login">
                    <h2>ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥</h2>
                    <div class="form-group">
                        <label>ÁÆ°ÁêÜËÄÖID:</label>
                        <input type="text" id="admin-id" placeholder="ÁÆ°ÁêÜËÄÖID„ÇíÂÖ•Âäõ">
                    </div>
                    <div class="form-group">
                        <label>„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                        <input type="password" id="admin-password" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ">
                    </div>
                    <button class="btn" onclick="adminLogin()">„É≠„Ç∞„Ç§„É≥</button>
                </div>
            </div>
            
            <!-- ÁÆ°ÁêÜËÄÖÁîªÈù¢ -->
            <div id="admin-screen" class="screen">
                <button class="btn back-btn" onclick="adminLogout()">‚Üê „É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                <h2>ÁÆ°ÁêÜËÄÖÁîªÈù¢</h2>
                <div id="admin-info" class="alert alert-success"></div>
                
                <div class="nav-buttons">
                    <button class="nav-btn" onclick="showAdminSection('date-settings-section')">
                        üìÖ ÊäΩÈÅ∏Êó•Á®ãË®≠ÂÆö
                    </button>
                    <button class="nav-btn" onclick="showAdminSection('lottery-section')">
                        üé≤ ÊäΩÈÅ∏ÈñãÂßã
                    </button>
                    <button class="nav-btn" onclick="showAdminSection('manage-section')">
                        ‚úèÔ∏è ÂøúÂãüÁÆ°ÁêÜ
                    </button>
                    <button class="nav-btn" onclick="showAdminSection('over-limit-section')">
                        ‚ö†Ô∏è 7Êûö‰ª•‰∏äÈÅ∏ÊäûËÄÖ‰∏ÄË¶ß
                    </button>
                    <button class="nav-btn" onclick="showAdminSection('history-section')">
                        üìö ÊäΩÈÅ∏Â±•Ê≠¥ÁÆ°ÁêÜ
                    </button>
                    <button class="nav-btn" onclick="showAdminSection('admin-manage-section')">
                        üë• ÁÆ°ÁêÜËÄÖÁÆ°ÁêÜ
                    </button>
                </div>
                
                <!-- ÊäΩÈÅ∏Êó•Á®ãË®≠ÂÆö„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="date-settings-section" class="admin-section">
                    <h3>ÊäΩÈÅ∏Êó•Á®ãË®≠ÂÆö</h3>
                    <div class="date-management">
                        <h4>Êó•Á®ãÁÆ°ÁêÜ</h4>
                        <p>ÁèæÂú®Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„ÇãÊäΩÈÅ∏ÂØæË±°Êó•: <span id="date-count">0</span>Êó•</p>
                        
                        <!-- Êó•‰ªòÁØÑÂõ≤ËøΩÂä† -->
                        <div class="date-range-inputs">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>ÈñãÂßãÊó•:</label>
                                <input type="date" id="start-date">
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>ÁµÇ‰∫ÜÊó•:</label>
                                <input type="date" id="end-date">
                            </div>
                            <button class="btn btn-success" onclick="addDateRange()">ÊúüÈñìËøΩÂä†</button>
                        </div>
                        
                        <!-- Âçò‰∏ÄÊó•‰ªòËøΩÂä† -->
                        <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; margin-bottom: 15px; align-items: end;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>Âçò‰∏ÄÊó•‰ªòËøΩÂä†:</label>
                                <input type="date" id="single-date">
                            </div>
                            <button class="btn btn-success" onclick="addSingleDate()">ËøΩÂä†</button>
                        </div>
                        
                        <!-- „ÇØ„Ç§„ÉÉ„ÇØË®≠ÂÆö„Éú„Çø„É≥ -->
                        <div style="margin-bottom: 20px;">
                            <button class="btn btn-secondary" onclick="addNext30Days()">‰ªäÊó•„Åã„Çâ30Êó•Èñì„ÇíËøΩÂä†</button>
                            <button class="btn btn-danger" onclick="clearAllDates()">ÂÖ®Êó•Á®ã„ÇØ„É™„Ç¢</button>
                        </div>
                        
                        <!-- Ë®≠ÂÆöÊ∏à„ÅøÊó•Á®ã‰∏ÄË¶ß -->
                        <div class="available-dates">
                            <h5>Ë®≠ÂÆöÊ∏à„ÅøÊó•Á®ã‰∏ÄË¶ß</h5>
                            <div id="date-list"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ÊäΩÈÅ∏ÈñãÂßã„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="lottery-section" class="admin-section">
                    <h3>ÊäΩÈÅ∏ÈñãÂßã</h3>
                    
                    <!-- ÁèæÂú®„ÅÆÁä∂Ê≥ÅË°®Á§∫ -->
                    <div id="current-lottery-status" class="alert alert-warning" style="display: none;">
                        <h4>‚ö†Ô∏è Ê≥®ÊÑè</h4>
                        <p>Êó¢„Å´ÊäΩÈÅ∏„ÅåÂÆå‰∫Ü„Åó„Å¶„ÅÑ„ÇãÁä∂ÊÖã„Åß„Åô„ÄÇÊñ∞„Åó„ÅÑÊäΩÈÅ∏„ÇíÈñãÂßã„Åô„Çã„Å´„ÅØ„ÄÅÁèæÂú®„ÅÆÊäΩÈÅ∏„ÇíÂ±•Ê≠¥„Å´‰øùÂ≠ò„Åó„Å¶„É™„Çª„ÉÉ„Éà„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                        <button class="btn btn-success" onclick="archiveCurrentLottery()">ÁèæÂú®„ÅÆÊäΩÈÅ∏„ÇíÂ±•Ê≠¥„Å´‰øùÂ≠ò„Åó„Å¶Êñ∞„Åó„ÅÑÊäΩÈÅ∏„ÇíÈñãÂßã</button>
                    </div>
                    
                    <div id="new-lottery-section">
                        <div class="form-group">
                            <label>ÊäΩÈÅ∏ÊúüÈñìÂêçÔºà‰æãÔºö2024Âπ¥3ÊúàÊúü„ÄÅÊò•Êúü‰ºëÊöá„Å™„Å©Ôºâ:</label>
                            <input type="text" id="lottery-period-name" placeholder="ÊäΩÈÅ∏ÊúüÈñì„ÅÆÂêçÂâç„ÇíÂÖ•Âäõ">
                        </div>
                        <div class="form-group">
                            <label>ÁµêÊûúÂÖ¨ÈñãÊó•ÊôÇ:</label>
                            <input type="datetime-local" id="publish-date">
                        </div>
                        <button class="btn" onclick="startLottery()">ÊäΩÈÅ∏„ÇíÈñãÂßã„Åô„Çã</button>
                        <button class="btn btn-secondary" onclick="publishResults()">ÁµêÊûú„ÇíÂç≥Â∫ß„Å´ÂÖ¨Èñã„Åô„Çã</button>
                    </div>
                </div>
                
                <!-- ÊäΩÈÅ∏Â±•Ê≠¥ÁÆ°ÁêÜ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="history-section" class="admin-section">
                    <h3>ÊäΩÈÅ∏Â±•Ê≠¥ÁÆ°ÁêÜ</h3>
                    
                    <div style="margin-bottom: 20px;">
                        <p>ÈÅéÂéª„ÅÆÊäΩÈÅ∏Ë®òÈå≤„ÇíÁÆ°ÁêÜ„Åß„Åç„Åæ„Åô„ÄÇÂ±•Ê≠¥„Åã„ÇâÂâäÈô§„Åó„Å¶„ÇÇ„ÄÅ‰øùÂ≠ò„Åï„Çå„Åü„Éá„Éº„Çø„ÅØÂÆâÂÖ®„Å´‰øùÁÆ°„Åï„Çå„Åæ„Åô„ÄÇ</p>
                    </div>
                    
                    <div id="history-list"></div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4>ÁèæÂú®„ÅÆÊäΩÈÅ∏Áä∂Ê≥Å</h4>
                        <div id="current-lottery-info"></div>
                    </div>
                </div>
                
                <!-- ÂøúÂãüÁÆ°ÁêÜ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="manage-section" class="admin-section">
                    <h3>ÂøúÂãüÁÆ°ÁêÜ</h3>
                    <div id="applications-list"></div>
                </div>
                
                <!-- 7Êûö‰ª•‰∏äÈÅ∏ÊäûËÄÖ‰∏ÄË¶ß„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="over-limit-section" class="admin-section">
                    <h3>7Êûö‰ª•‰∏äÈÅ∏ÊäûËÄÖ‰∏ÄË¶ß</h3>
                    <div id="over-limit-list"></div>
                </div>
                
                <!-- ÁÆ°ÁêÜËÄÖÁÆ°ÁêÜ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="admin-manage-section" class="admin-section">
                    <h3>ÁÆ°ÁêÜËÄÖÁÆ°ÁêÜ</h3>
                    
                    <!-- ÁÆ°ÁêÜËÄÖËøΩÂä† -->
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>ÁÆ°ÁêÜËÄÖËøΩÂä†</h4>
                        <div class="form-group">
                            <label>Êñ∞„Åó„ÅÑÁÆ°ÁêÜËÄÖID:</label>
                            <input type="text" id="new-admin-id" placeholder="ÁÆ°ÁêÜËÄÖID„ÇíÂÖ•Âäõ">
                        </div>
                        <div class="form-group">
                            <label>Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                            <input type="password" id="new-admin-password" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ">
                        </div>
                        <div class="form-group">
                            <label>„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç:</label>
                            <input type="password" id="new-admin-password-confirm" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÜçÂÖ•Âäõ">
                        </div>
                        <button class="btn" onclick="addNewAdmin()">ÁÆ°ÁêÜËÄÖ„ÇíËøΩÂä†</button>
                    </div>
                    
                    <!-- „Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥ -->
                    <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</h4>
                        <div class="form-group">
                            <label>Â§âÊõ¥ÂØæË±°„ÅÆÁÆ°ÁêÜËÄÖID:</label>
                            <select id="change-admin-id">
                                <option value="">ÁÆ°ÁêÜËÄÖ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                            <input type="password" id="current-password" placeholder="ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ">
                        </div>
                        <div class="form-group">
                            <label>Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                            <input type="password" id="change-new-password" placeholder="Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ">
                        </div>
                        <div class="form-group">
                            <label>Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç:</label>
                            <input type="password" id="change-new-password-confirm" placeholder="Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÜçÂÖ•Âäõ">
                        </div>
                        <button class="btn" onclick="changeAdminPassword()">„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂ§âÊõ¥</button>
                    </div>
                    
                    <!-- ÁÆ°ÁêÜËÄÖ‰∏ÄË¶ß -->
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>ÁÆ°ÁêÜËÄÖ‰∏ÄË¶ß</h4>
                        <div id="admin-list" class="table-container"></div>
                    </div>
                </div>
            </div>
            
            <!-- Áî≥„ÅóËæº„ÅøÁîªÈù¢ -->
            <div id="apply-screen" class="screen">
                <button class="btn back-btn" onclick="showScreen('home-screen')">‚Üê Êàª„Çã</button>
                <h2>ÊäΩÈÅ∏Áî≥„ÅóËæº„Åø</h2>
                
                <div class="form-group">
                    <label>Ë¢ñÁï™ÔºàÁ§æÂì°Áï™Âè∑Ôºâ:</label>
                    <input type="text" id="employee-id" placeholder="Ë¢ñÁï™„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" maxlength="10">
                </div>
                
                <div class="form-group">
                    <label>„ÅäÂêçÂâç:</label>
                    <input type="text" id="employee-name" placeholder="„ÅäÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" maxlength="20">
                </div>
                
                <div class="form-group">
                    <label>Â∏åÊúõÊó•„Å®„Ç∑„Éï„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÂà∂Èôê„Å™„ÅóÔºâ:</label>
                    <div class="selection-counter">
                        ÈÅ∏ÊäûÊ∏à„Åø: <span id="selection-count">0</span>‰ª∂
                    </div>
                    <div id="selection-warning" class="alert alert-warning" style="display: none;">
                        ‚ö†Ô∏è 7Êûö‰ª•‰∏äÈÅ∏Êäû„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
                    </div>
                    <div id="date-options" class="date-grid"></div>
                </div>
                
                <button class="btn" onclick="submitApplication()">ÂøúÂãü„Åô„Çã</button>
                <div id="application-message"></div>
            </div>
            
            <!-- ÂøúÂãüÁä∂Ê≥ÅÁ¢∫Ë™çÁîªÈù¢ -->
            <div id="view-screen" class="screen">
                <button class="btn back-btn" onclick="showScreen('home-screen')">‚Üê Êàª„Çã</button>
                <h2>ÂøúÂãüÁä∂Ê≥ÅÁ¢∫Ë™ç</h2>
                
                <div class="search-filter">
                    <input type="text" id="search-employee" placeholder="Ë¢ñÁï™„ÅßÊ§úÁ¥¢">
                    <select id="filter-date">
                        <option value="">ÂÖ®„Å¶„ÅÆÊó•Á®ã</option>
                    </select>
                    <select id="filter-shift">
                        <option value="">ÂÖ®„Å¶„ÅÆ„Ç∑„Éï„Éà</option>
                        <option value="early">Êó©Áï™</option>
                        <option value="late">ÈÅÖÁï™</option>
                    </select>
                    <button class="btn btn-secondary" onclick="filterApplications()">Ê§úÁ¥¢„ÉªÁµû„ÇäËæº„Åø</button>
                </div>
                
                <div id="applications-view"></div>
            </div>
            
            <!-- ÁµêÊûúÁîªÈù¢ -->
            <div id="result-screen" class="screen">
                <button class="btn back-btn" onclick="showScreen('home-screen')">‚Üê Êàª„Çã</button>
                <h2>ÊäΩÈÅ∏ÁµêÊûú</h2>
                
                <div class="search-filter">
                    <select id="result-sort">
                        <option value="date">Êó•‰ªòÈ†Ü</option>
                        <option value="rank">ÊäΩÈÅ∏È†Ü‰ΩçÈ†Ü</option>
                        <option value="name">ÂêçÂâçÈ†Ü</option>
                        <option value="shift">„Ç∑„Éï„ÉàÂà•</option>
                    </select>
                    <button class="btn btn-secondary" onclick="sortResults()">‰∏¶„Å≥Êõø„Åà</button>
                </div>
                
                <div id="lottery-results"></div>
            </div>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„ÅÆÂÆ£Ë®Ä
        let applications = [];
        let lotteryDates = [];
        let lotteryResults = [];
        let currentAdmin = '';
        let publishDate = '';
        let isResultsPublished = false;
        let lotteryHistory = []; // ÊäΩÈÅ∏Â±•Ê≠¥„Çí‰øùÂ≠ò
        let currentLotteryId = null; // ÁèæÂú®„ÅÆÊäΩÈÅ∏ID
        let adminUsers = {
            'admin1': 'pass1',
            'admin2': 'pass2',
            'admin3': 'pass3'
        };

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÈñãÂßã');
            updateDateOptions();
            updateDateList();
        });

        // ÁîªÈù¢Âàá„ÇäÊõø„ÅàÈñ¢Êï∞
        function showScreen(screenId) {
            console.log('ÁîªÈù¢Âàá„ÇäÊõø„Åà:', screenId);
            // ÂÖ®„Å¶„ÅÆÁîªÈù¢„ÇíÈùûË°®Á§∫
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // ÊåáÂÆö„Åï„Çå„ÅüÁîªÈù¢„ÇíË°®Á§∫
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }
            
            // ÁîªÈù¢Âà•„ÅÆËøΩÂä†Âá¶ÁêÜ
            if (screenId === 'view-screen') {
                displayApplications();
            } else if (screenId === 'result-screen') {
                displayResults();
            } else if (screenId === 'apply-screen') {
                updateSelectionCount();
            }
        }

        // ÁÆ°ÁêÜËÄÖ„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆË°®Á§∫
        function showAdminSection(sectionId) {
            document.querySelectorAll('.admin-section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';
            
            if (sectionId === 'date-settings-section') {
                updateDateList();
            } else if (sectionId === 'lottery-section') {
                updateLotterySection();
            } else if (sectionId === 'manage-section') {
                loadApplicationsForAdmin();
            } else if (sectionId === 'admin-manage-section') {
                loadAdminManagement();
            } else if (sectionId === 'over-limit-section') {
                loadOverLimitList();
            } else if (sectionId === 'history-section') {
                loadHistorySection();
            }
        }

        // Êó•Á®ãÁÆ°ÁêÜÈñ¢Êï∞
        function addDateRange() {
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            
            if (!startDate || !endDate) {
                alert('ÈñãÂßãÊó•„Å®ÁµÇ‰∫ÜÊó•„Çí‰∏°ÊñπÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const start = new Date(startDate);
            const end = new Date(endDate);
            
            if (start > end) {
                alert('ÈñãÂßãÊó•„ÅØÁµÇ‰∫ÜÊó•„Çà„ÇäÂâç„ÅÆÊó•‰ªò„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const newDates = [];
            const currentDate = new Date(start);
            
            while (currentDate <= end) {
                const dateString = currentDate.toISOString().split('T')[0];
                if (!lotteryDates.includes(dateString)) {
                    newDates.push(dateString);
                }
                currentDate.setDate(currentDate.getDate() + 1);
            }
            
            lotteryDates.push(...newDates);
            lotteryDates.sort();
            
            updateDateList();
            updateDateOptions();
            
            document.getElementById('start-date').value = '';
            document.getElementById('end-date').value = '';
            
            alert(`${newDates.length}Êó•ÂàÜ„ÅÆÊó•Á®ã„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü„ÄÇ`);
        }

        function addSingleDate() {
            const singleDate = document.getElementById('single-date').value;
            
            if (!singleDate) {
                alert('Êó•‰ªò„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            if (lotteryDates.includes(singleDate)) {
                alert('„Åì„ÅÆÊó•‰ªò„ÅØÊó¢„Å´ËøΩÂä†„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ');
                return;
            }
            
            lotteryDates.push(singleDate);
            lotteryDates.sort();
            
            updateDateList();
            updateDateOptions();
            
            document.getElementById('single-date').value = '';
            alert('Êó•Á®ã„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü„ÄÇ');
        }

        function addNext30Days() {
            const today = new Date();
            const newDates = [];
            
            for (let i = 1; i <= 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                const dateString = date.toISOString().split('T')[0];
                
                if (!lotteryDates.includes(dateString)) {
                    newDates.push(dateString);
                }
            }
            
            lotteryDates.push(...newDates);
            lotteryDates.sort();
            
            updateDateList();
            updateDateOptions();
            
            alert(`${newDates.length}Êó•ÂàÜ„ÅÆÊó•Á®ã„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü„ÄÇ`);
        }

        function clearAllDates() {
            if (confirm('ÂÖ®„Å¶„ÅÆÊó•Á®ãË®≠ÂÆö„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åô„ÅãÔºü')) {
                lotteryDates = [];
                updateDateList();
                updateDateOptions();
                alert('ÂÖ®„Å¶„ÅÆÊó•Á®ã„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü„ÄÇ');
            }
        }

        function removeSingleDate(dateToRemove) {
            if (confirm(`${formatDate(dateToRemove)}„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`)) {
                lotteryDates = lotteryDates.filter(date => date !== dateToRemove);
                updateDateList();
                updateDateOptions();
                alert('Êó•Á®ã„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ');
            }
        }

        function updateDateList() {
            const container = document.getElementById('date-list');
            const dateCountElement = document.getElementById('date-count');
            
            if (dateCountElement) {
                dateCountElement.textContent = lotteryDates.length;
            }
            
            if (!container) return;
            
            if (lotteryDates.length === 0) {
                container.innerHTML = '<p style="color: #6c757d; text-align: center; padding: 20px;">Ë®≠ÂÆö„Åï„Çå„ÅüÊó•Á®ã„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            let html = '';
            lotteryDates.forEach(date => {
                html += `
                    <div class="date-item">
                        <div class="date-info">
                            <strong>${formatDate(date)}</strong>
                            <span style="color: #6c757d; margin-left: 10px;">${date}</span>
                        </div>
                        <div class="date-actions">
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" onclick="removeSingleDate('${date}')">
                                ÂâäÈô§
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Êó•‰ªò„Ç™„Éó„Ç∑„Éß„É≥„ÅÆÊõ¥Êñ∞
        function updateDateOptions() {
            const container = document.getElementById('date-options');
            const filterSelect = document.getElementById('filter-date');
            
            if (container) {
                container.innerHTML = '';
                if (lotteryDates.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #6c757d; padding: 20px;">ÊäΩÈÅ∏ÂØæË±°Êó•„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÁÆ°ÁêÜËÄÖ„Å´„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ</p>';
                } else {
                    lotteryDates.forEach(date => {
                        const div = document.createElement('div');
                        div.className = 'date-selector';
                        div.innerHTML = `
                            <div>
                                <input type="checkbox" id="date-${date}" value="${date}" onchange="toggleDateSelection('${date}')">
                                <label for="date-${date}" style="font-weight: bold;">${formatDate(date)}</label>
                            </div>
                            <div class="shift-options" id="shift-${date}">
                                <div class="shift-option">
                                    <input type="radio" id="early-${date}" name="shift-${date}" value="early">
                                    <label for="early-${date}">Êó©Áï™</label>
                                </div>
                                <div class="shift-option">
                                    <input type="radio" id="late-${date}" name="shift-${date}" value="late">
                                    <label for="late-${date}">ÈÅÖÁï™</label>
                                </div>
                            </div>
                        `;
                        container.appendChild(div);
                    });
                }
            }
            
            if (filterSelect) {
                filterSelect.innerHTML = '<option value="">ÂÖ®„Å¶„ÅÆÊó•Á®ã</option>';
                lotteryDates.forEach(date => {
                    const option = document.createElement('option');
                    option.value = date;
                    option.textContent = formatDate(date);
                    filterSelect.appendChild(option);
                });
            }
        }

        // Êó•‰ªòÈÅ∏Êäû„ÅÆÂàá„ÇäÊõø„Åà
        function toggleDateSelection(date) {
            const checkbox = document.getElementById(`date-${date}`);
            const shiftOptions = document.getElementById(`shift-${date}`);
            const dateSelector = checkbox.closest('.date-selector');
            
            if (checkbox.checked) {
                shiftOptions.style.display = 'flex';
                dateSelector.classList.add('selected');
                document.getElementById(`early-${date}`).checked = true;
            } else {
                shiftOptions.style.display = 'none';
                dateSelector.classList.remove('selected');
                document.getElementById(`early-${date}`).checked = false;
                document.getElementById(`late-${date}`).checked = false;
            }
            updateSelectionCount();
        }

        // ÈÅ∏ÊäûÊï∞„ÅÆÊõ¥Êñ∞
        function updateSelectionCount() {
            const countSpan = document.getElementById('selection-count');
            const warningDiv = document.getElementById('selection-warning');
            if (!countSpan) return;
            
            let totalSelections = 0;
            lotteryDates.forEach(date => {
                const dateCheckbox = document.getElementById(`date-${date}`);
                if (dateCheckbox && dateCheckbox.checked) {
                    totalSelections++;
                }
            });
            
            countSpan.textContent = totalSelections;
            
            if (warningDiv) {
                if (totalSelections >= 7) {
                    warningDiv.style.display = 'block';
                } else {
                    warningDiv.style.display = 'none';
                }
            }
        }

        // Êó•‰ªò„ÅÆ„Éï„Ç©„Éº„Éû„ÉÉ„Éà
        function formatDate(dateString) {
            const date = new Date(dateString);
            const weekdays = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
            return `${date.getMonth() + 1}/${date.getDate()}(${weekdays[date.getDay()]})`;
        }

        // ÂøúÂãü„ÅÆÈÄÅ‰ø°
        function submitApplication() {
            const employeeId = document.getElementById('employee-id').value.trim();
            const employeeName = document.getElementById('employee-name').value.trim();
            const selectedDates = [];
            
            lotteryDates.forEach(date => {
                const dateCheckbox = document.getElementById(`date-${date}`);
                if (dateCheckbox && dateCheckbox.checked) {
                    const earlyRadio = document.getElementById(`early-${date}`);
                    const lateRadio = document.getElementById(`late-${date}`);
                    
                    if (earlyRadio.checked) {
                        selectedDates.push({ date, shift: 'early' });
                    } else if (lateRadio.checked) {
                        selectedDates.push({ date, shift: 'late' });
                    }
                }
            });
            
            if (!employeeId || !employeeName || selectedDates.length === 0) {
                showMessage('application-message', 'ÂÖ®„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', 'error');
                return;
            }
            
            const existingApp = applications.find(app => app.employeeId === employeeId);
            if (existingApp) {
                showMessage('application-message', '„Åì„ÅÆË¢ñÁï™„ÅØÊó¢„Å´ÂøúÂãüÊ∏à„Åø„Åß„Åô„ÄÇ', 'error');
                return;
            }
            
            const application = {
                id: Date.now(),
                employeeId,
                employeeName,
                selectedDates,
                timestamp: new Date().toISOString()
            };
            
            applications.push(application);
            
            const message = selectedDates.length >= 7 
                ? `ÂøúÂãü„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅÈÅ∏ÊäûÊï∞: ${selectedDates.length}‰ª∂ ‚ö†Ô∏è7Êûö‰ª•‰∏äÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Åæ„Åô`
                : `ÂøúÂãü„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅÈÅ∏ÊäûÊï∞: ${selectedDates.length}‰ª∂`;
            
            showMessage('application-message', message, selectedDates.length >= 7 ? 'warning' : 'success');
            
            // „Éï„Ç©„Éº„É†„É™„Çª„ÉÉ„Éà
            document.getElementById('employee-id').value = '';
            document.getElementById('employee-name').value = '';
            lotteryDates.forEach(date => {
                const dateCheckbox = document.getElementById(`date-${date}`);
                if (dateCheckbox) {
                    dateCheckbox.checked = false;
                    toggleDateSelection(date);
                }
            });
        }

        // ÂøúÂãüÁä∂Ê≥Å„ÅÆË°®Á§∫
        function displayApplications() {
            const container = document.getElementById('applications-view');
            if (!applications.length) {
                container.innerHTML = '<p>„Åæ„Å†ÂøúÂãü„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>';
                return;
            }
            
            const groupedByDate = {};
            lotteryDates.forEach(date => {
                groupedByDate[date] = { early: [], late: [] };
            });
            
            applications.forEach(app => {
                app.selectedDates.forEach(dateInfo => {
                    if (groupedByDate[dateInfo.date]) {
                        groupedByDate[dateInfo.date][dateInfo.shift].push(app);
                    }
                });
            });
            
            let html = '';
            Object.keys(groupedByDate).forEach(date => {
                const earlyApps = groupedByDate[date].early;
                const lateApps = groupedByDate[date].late;
                
                if (earlyApps.length > 0 || lateApps.length > 0) {
                    html += `
                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <h3>${formatDate(date)}</h3>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div>
                                    <h4>Êó©Áï™ (${earlyApps.length}Âêç)</h4>
                                    ${earlyApps.map(app => `<p>${app.employeeName} (${app.employeeId})</p>`).join('')}
                                </div>
                                <div>
                                    <h4>ÈÅÖÁï™ (${lateApps.length}Âêç)</h4>
                                    ${lateApps.map(app => `<p>${app.employeeName} (${app.employeeId})</p>`).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
        }

        // „Éï„Ç£„É´„Çø„É™„É≥„Ç∞Ê©üËÉΩ
        function filterApplications() {
            displayApplications();
        }

        // ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥
        function adminLogin() {
            const adminId = document.getElementById('admin-id').value.trim();
            const password = document.getElementById('admin-password').value.trim();
            
            if (adminUsers[adminId] && adminUsers[adminId] === password) {
                currentAdmin = adminId;
                showScreen('admin-screen');
                document.getElementById('admin-info').textContent = `„É≠„Ç∞„Ç§„É≥‰∏≠: ${adminId}`;
                document.getElementById('admin-id').value = '';
                document.getElementById('admin-password').value = '';
            } else {
                alert('„É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
            }
        }

        // ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç¢„Ç¶„Éà
        function adminLogout() {
            currentAdmin = '';
            showScreen('home-screen');
        }

        // ÊäΩÈÅ∏ÈñãÂßã
        function startLottery() {
            if (applications.length === 0) {
                alert('ÂøúÂãüËÄÖ„Åå„ÅÑ„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            if (lotteryDates.length === 0) {
                alert('ÊäΩÈÅ∏ÂØæË±°Êó•„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            const periodName = document.getElementById('lottery-period-name').value.trim();
            if (!periodName) {
                alert('ÊäΩÈÅ∏ÊúüÈñìÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const publishDateTime = document.getElementById('publish-date').value;
            if (publishDateTime) {
                publishDate = publishDateTime;
            }
            
            // Êñ∞„Åó„ÅÑÊäΩÈÅ∏ID„ÇíÁîüÊàê
            currentLotteryId = 'lottery_' + Date.now();
            
            lotteryResults = [];
            
            lotteryDates.forEach(date => {
                const earlyApplicants = [];
                const lateApplicants = [];
                
                applications.forEach(app => {
                    app.selectedDates.forEach(dateInfo => {
                        if (dateInfo.date === date) {
                            if (dateInfo.shift === 'early') {
                                earlyApplicants.push(app);
                            } else if (dateInfo.shift === 'late') {
                                lateApplicants.push(app);
                            }
                        }
                    });
                });
                
                const shuffledEarly = shuffleArray([...earlyApplicants]);
                const shuffledLate = shuffleArray([...lateApplicants]);
                
                shuffledEarly.forEach((app, index) => {
                    lotteryResults.push({
                        date,
                        employeeId: app.employeeId,
                        employeeName: app.employeeName,
                        shiftType: 'early',
                        rank: index + 1,
                        isWinner: index < 2
                    });
                });
                
                shuffledLate.forEach((app, index) => {
                    lotteryResults.push({
                        date,
                        employeeId: app.employeeId,
                        employeeName: app.employeeName,
                        shiftType: 'late',
                        rank: index + 1,
                        isWinner: index < 2
                    });
                });
            });
            
            alert('ÊäΩÈÅ∏„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ');
            updateLotterySection();
        }

        // ÁèæÂú®„ÅÆÊäΩÈÅ∏„ÇíÂ±•Ê≠¥„Å´‰øùÂ≠ò
        function archiveCurrentLottery() {
            if (!currentLotteryId || lotteryResults.length === 0) {
                alert('‰øùÂ≠ò„Åô„ÇãÊäΩÈÅ∏ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            const periodName = prompt('„Åì„ÅÆÊäΩÈÅ∏ÊúüÈñì„ÅÆÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ:', '');
            if (!periodName) {
                alert('ÊúüÈñìÂêç„ÅåÂÖ•Âäõ„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ');
                return;
            }
            
            const historyEntry = {
                id: currentLotteryId,
                periodName: periodName,
                lotteryDates: [...lotteryDates],
                applications: [...applications],
                lotteryResults: [...lotteryResults],
                publishDate: publishDate,
                isResultsPublished: isResultsPublished,
                archivedDate: new Date().toISOString(),
                archivedBy: currentAdmin
            };
            
            lotteryHistory.push(historyEntry);
            
            // ÁèæÂú®„ÅÆ„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà
            resetCurrentLottery();
            
            alert(`„Äå${periodName}„Äç„Å®„Åó„Å¶Â±•Ê≠¥„Å´‰øùÂ≠ò„Åó„ÄÅÊñ∞„Åó„ÅÑÊäΩÈÅ∏„ÅÆÊ∫ñÂÇô„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ`);
            updateLotterySection();
            loadHistorySection();
        }

        // ÁèæÂú®„ÅÆÊäΩÈÅ∏„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà
        function resetCurrentLottery() {
            applications = [];
            lotteryResults = [];
            isResultsPublished = false;
            publishDate = '';
            currentLotteryId = null;
            
            // Êó•Á®ã„ÅØ„Åù„ÅÆ„Åæ„ÅæÊÆã„ÅôÔºàÁÆ°ÁêÜËÄÖ„ÅåÊòéÁ§∫ÁöÑ„Å´Â§âÊõ¥„Åô„Çã„Åæ„ÅßÔºâ
        }

        // ÊäΩÈÅ∏„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆÊõ¥Êñ∞
        function updateLotterySection() {
            const statusDiv = document.getElementById('current-lottery-status');
            const newLotterySection = document.getElementById('new-lottery-section');
            
            if (lotteryResults.length > 0) {
                statusDiv.style.display = 'block';
                newLotterySection.style.display = 'none';
            } else {
                statusDiv.style.display = 'none';
                newLotterySection.style.display = 'block';
            }
        }

        // Â±•Ê≠¥„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆË™≠„ÅøËæº„Åø
        function loadHistorySection() {
            const historyContainer = document.getElementById('history-list');
            const currentInfoContainer = document.getElementById('current-lottery-info');
            
            // ÁèæÂú®„ÅÆÊäΩÈÅ∏Áä∂Ê≥Å„ÇíË°®Á§∫
            if (currentLotteryId && lotteryResults.length > 0) {
                currentInfoContainer.innerHTML = `
                    <div class="alert alert-success">
                        <h5>ÈÄ≤Ë°å‰∏≠„ÅÆÊäΩÈÅ∏</h5>
                        <p><strong>ÊäΩÈÅ∏ID:</strong> ${currentLotteryId}</p>
                        <p><strong>ÂøúÂãüËÄÖÊï∞:</strong> ${applications.length}Âêç</p>
                        <p><strong>ÂØæË±°Êó•Êï∞:</strong> ${lotteryDates.length}Êó•</p>
                        <p><strong>ÁµêÊûúÁä∂Ê≥Å:</strong> ${isResultsPublished ? 'ÂÖ¨ÈñãÊ∏à„Åø' : 'Êú™ÂÖ¨Èñã'}</p>
                        <p><strong>Á∑èÊäΩÈÅ∏ÁµêÊûúÊï∞:</strong> ${lotteryResults.length}‰ª∂</p>
                    </div>
                `;
            } else {
                currentInfoContainer.innerHTML = `
                    <div class="alert alert-warning">
                        <p>ÁèæÂú®ÈÄ≤Ë°å‰∏≠„ÅÆÊäΩÈÅ∏„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
                    </div>
                `;
            }
            
            // Â±•Ê≠¥‰∏ÄË¶ß„ÇíË°®Á§∫
            if (lotteryHistory.length === 0) {
                historyContainer.innerHTML = '<div class="alert alert-success">„Åæ„Å†Â±•Ê≠¥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</div>';
                return;
            }
            
            let html = '<div class="table-container"><table><thead><tr><th>ÊúüÈñìÂêç</th><th>‰øùÂ≠òÊó•</th><th>ÂøúÂãüËÄÖÊï∞</th><th>ÂØæË±°Êó•Êï∞</th><th>‰øùÂ≠òËÄÖ</th><th>Êìç‰Ωú</th></tr></thead><tbody>';
            
            lotteryHistory.forEach((entry, index) => {
                const archivedDate = new Date(entry.archivedDate);
                html += `
                    <tr>
                        <td><strong>${entry.periodName}</strong></td>
                        <td>${archivedDate.toLocaleDateString()} ${archivedDate.toLocaleTimeString()}</td>
                        <td>${entry.applications.length}Âêç</td>
                        <td>${entry.lotteryDates.length}Êó•</td>
                        <td>${entry.archivedBy}</td>
                        <td>
                            <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem; margin: 2px;" onclick="viewHistoryDetails(${index})">Ë©≥Á¥∞Ë°®Á§∫</button>
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem; margin: 2px;" onclick="deleteHistory(${index})">ÂâäÈô§</button>
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            historyContainer.innerHTML = html;
        }

        // Â±•Ê≠¥„ÅÆË©≥Á¥∞Ë°®Á§∫
        function viewHistoryDetails(index) {
            const entry = lotteryHistory[index];
            if (!entry) return;
            
            let detailsHtml = `
                <div style="max-width: 800px; max-height: 600px; overflow-y: auto;">
                    <h3>ÊäΩÈÅ∏Â±•Ê≠¥Ë©≥Á¥∞: ${entry.periodName}</h3>
                    
                    <div style="margin: 20px 0;">
                        <h4>Âü∫Êú¨ÊÉÖÂ†±</h4>
                        <p><strong>ÊäΩÈÅ∏ID:</strong> ${entry.id}</p>
                        <p><strong>‰øùÂ≠òÊó•ÊôÇ:</strong> ${new Date(entry.archivedDate).toLocaleString()}</p>
                        <p><strong>‰øùÂ≠òËÄÖ:</strong> ${entry.archivedBy}</p>
                        <p><strong>ÂøúÂãüËÄÖÊï∞:</strong> ${entry.applications.length}Âêç</p>
                        <p><strong>ÂØæË±°Êó•Êï∞:</strong> ${entry.lotteryDates.length}Êó•</p>
                        <p><strong>ÁµêÊûúÂÖ¨Èñã:</strong> ${entry.isResultsPublished ? 'ÂÖ¨ÈñãÊ∏à„Åø' : 'Êú™ÂÖ¨Èñã'}</p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <h4>ÊäΩÈÅ∏ÂØæË±°Êó•</h4>
                        <p>${entry.lotteryDates.map(date => formatDate(date)).join(', ')}</p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <h4>ÂøúÂãüËÄÖ‰∏ÄË¶ß</h4>
                        <div style="max-height: 200px; overflow-y: auto;">
                            ${entry.applications.map(app => 
                                `<p>${app.employeeName} (${app.employeeId}) - ${app.selectedDates.length}‰ª∂ÈÅ∏Êäû</p>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <h4>ÊäΩÈÅ∏ÁµêÊûúÊ¶ÇË¶Å</h4>
                        <p>Á∑èÁµêÊûúÊï∞: ${entry.lotteryResults.length}‰ª∂</p>
                        <p>ÂΩìÈÅ∏ËÄÖÊï∞: ${entry.lotteryResults.filter(r => r.isWinner).length}Âêç</p>
                    </div>
                </div>
            `;
            
            // „É¢„Éº„ÉÄ„É´È¢®„ÅÆË°®Á§∫
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                background: rgba(0,0,0,0.8); z-index: 1000; 
                display: flex; align-items: center; justify-content: center;
                padding: 20px;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white; border-radius: 10px; padding: 30px;
                position: relative; max-width: 90vw; max-height: 90vh; 
                overflow-y: auto;
            `;
            
            content.innerHTML = detailsHtml + `
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="this.closest('[style*=fixed]').remove()">Èñâ„Åò„Çã</button>
                </div>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
        }

        // Â±•Ê≠¥ÂâäÈô§
        function deleteHistory(index) {
            const entry = lotteryHistory[index];
            if (!entry) return;
            
            if (confirm(`ÊäΩÈÅ∏Â±•Ê≠¥„Äå${entry.periodName}„Äç„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü\n„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ`)) {
                lotteryHistory.splice(index, 1);
                loadHistorySection();
                alert('Â±•Ê≠¥„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ');
            }
        }

        // ÁµêÊûúÂÖ¨Èñã
        function publishResults() {
            if (lotteryResults.length === 0) {
                alert('„Åæ„ÅöÊäΩÈÅ∏„ÇíÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            isResultsPublished = true;
            alert('ÁµêÊûú„ÇíÂÖ¨Èñã„Åó„Åæ„Åó„ÅüÔºÅ');
            updateLotterySection();
        }

        // ÈÖçÂàó„ÅÆ„Ç∑„É£„ÉÉ„Éï„É´
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ÁÆ°ÁêÜËÄÖÁî®ÂøúÂãü‰∏ÄË¶ß
        function loadApplicationsForAdmin() {
            const container = document.getElementById('applications-list');
            
            if (!applications.length) {
                container.innerHTML = '<p>ÂøúÂãü„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>';
                return;
            }
            
            let html = '<div class="table-container"><table><thead><tr><th>Ë¢ñÁï™</th><th>ÂêçÂâç</th><th>Â∏åÊúõÊó•„Å®„Ç∑„Éï„Éà</th><th>Á∑èÈÅ∏ÊäûÊï∞</th></tr></thead><tbody>';
            
            applications.forEach(app => {
                const dateShiftText = app.selectedDates.map(dateInfo => 
                    `${formatDate(dateInfo.date)}(${dateInfo.shift === 'early' ? 'Êó©Áï™' : 'ÈÅÖÁï™'})`
                ).join(', ');
                
                html += `
                    <tr>
                        <td>${app.employeeId}</td>
                        <td>${app.employeeName}</td>
                        <td>${dateShiftText}</td>
                        <td><strong>${app.selectedDates.length}‰ª∂</strong></td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        // 7Êûö‰ª•‰∏äÈÅ∏ÊäûËÄÖ‰∏ÄË¶ß
        function loadOverLimitList() {
            const container = document.getElementById('over-limit-list');
            const overLimitApplicants = applications.filter(app => app.selectedDates.length >= 7);
            
            if (!overLimitApplicants.length) {
                container.innerHTML = '<div class="alert alert-success">7Êûö‰ª•‰∏äÈÅ∏Êäû„Åó„Å¶„ÅÑ„ÇãÂøúÂãüËÄÖ„ÅØ„ÅÑ„Åæ„Åõ„Çì„ÄÇ</div>';
                return;
            }
            
            overLimitApplicants.sort((a, b) => b.selectedDates.length - a.selectedDates.length);
            
            let html = `
                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è Ê≥®ÊÑè:</strong> ${overLimitApplicants.length}Âêç„Åå7Êûö‰ª•‰∏äÈÅ∏Êäû„Åó„Å¶„ÅÑ„Åæ„Åô
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ë¢ñÁï™</th>
                                <th>ÂêçÂâç</th>
                                <th>ÈÅ∏ÊäûÊï∞</th>
                                <th>Â∏åÊúõÊó•„Å®„Ç∑„Éï„Éà</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            overLimitApplicants.forEach(app => {
                const dateShiftText = app.selectedDates.map(dateInfo => 
                    `${formatDate(dateInfo.date)}(${dateInfo.shift === 'early' ? 'Êó©Áï™' : 'ÈÅÖÁï™'})`
                ).join(', ');
                
                html += `
                    <tr style="background-color: ${app.selectedDates.length >= 10 ? '#ffebee' : '#fff3cd'};">
                        <td><strong>${app.employeeId}</strong></td>
                        <td><strong>${app.employeeName}</strong></td>
                        <td>
                            <span style="background: ${app.selectedDates.length >= 10 ? '#f44336' : '#ff9800'}; 
                                         color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;">
                                ${app.selectedDates.length}Êûö
                            </span>
                        </td>
                        <td style="font-size: 0.9rem;">${dateShiftText}</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            
            const stats = {
                total: overLimitApplicants.length,
                seven_to_nine: overLimitApplicants.filter(app => app.selectedDates.length >= 7 && app.selectedDates.length <= 9).length,
                ten_plus: overLimitApplicants.filter(app => app.selectedDates.length >= 10).length,
                max_selections: Math.max(...overLimitApplicants.map(app => app.selectedDates.length))
            };
            
            html += `
                <div style="margin-top: 20px; padding: 15px; background: #e9ecef; border-radius: 8px;">
                    <h4>Áµ±Ë®àÊÉÖÂ†±</h4>
                    <p>‚Ä¢ 7ÔΩû9ÊûöÈÅ∏Êäû: <strong>${stats.seven_to_nine}Âêç</strong></p>
                    <p>‚Ä¢ 10Êûö‰ª•‰∏äÈÅ∏Êäû: <strong>${stats.ten_plus}Âêç</strong></p>
                    <p>‚Ä¢ ÊúÄÂ§ßÈÅ∏ÊäûÊï∞: <strong>${stats.max_selections}Êûö</strong></p>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // ÁµêÊûúË°®Á§∫
        function displayResults() {
            const container = document.getElementById('lottery-results');
            
            if (!isResultsPublished) {
                container.innerHTML = '<div class="alert alert-warning">„Åæ„Å†ÊäΩÈÅ∏„ÅåË°å„Çè„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</div>';
                return;
            }
            
            if (!lotteryResults.length) {
                container.innerHTML = '<div class="alert alert-warning">ÊäΩÈÅ∏ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</div>';
                return;
            }
            
            displaySortedResults();
        }

        // ÁµêÊûú„ÅÆ„ÇΩ„Éº„Éà
        function sortResults() {
            displaySortedResults();
        }

        // „ÇΩ„Éº„ÉàÊ∏à„ÅøÁµêÊûú„ÅÆË°®Á§∫
        function displaySortedResults() {
            const container = document.getElementById('lottery-results');
            const groupedResults = {};
            
            lotteryResults.forEach(result => {
                if (!groupedResults[result.date]) {
                    groupedResults[result.date] = { early: [], late: [] };
                }
                groupedResults[result.date][result.shiftType].push(result);
            });
            
            let html = '';
            Object.keys(groupedResults).sort().forEach(date => {
                const earlyResults = groupedResults[date].early;
                const lateResults = groupedResults[date].late;
                
                if (earlyResults.length > 0 || lateResults.length > 0) {
                    html += `
                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <h3>${formatDate(date)}</h3>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    `;
                    
                    if (earlyResults.length > 0) {
                        html += `
                            <div>
                                <h4>Êó©Áï™</h4>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr><th>È†Ü‰Ωç</th><th>ÂêçÂâç</th><th>Ë¢ñÁï™</th><th>ÁµêÊûú</th></tr>
                                        </thead>
                                        <tbody>
                        `;
                        earlyResults.forEach(result => {
                            html += `
                                <tr>
                                    <td>${result.rank}</td>
                                    <td>${result.employeeName}</td>
                                    <td>${result.employeeId}</td>
                                    <td>
                                        <span class="status-badge ${result.isWinner ? 'status-winner' : 'status-waiting'}">
                                            ${result.isWinner ? 'ÂΩìÈÅ∏' : 'Ë£úÊ¨†'}
                                        </span>
                                    </td>
                                </tr>
                            `;
                        });
                        html += '</tbody></table></div></div>';
                    }
                    
                    if (lateResults.length > 0) {
                        html += `
                            <div>
                                <h4>ÈÅÖÁï™</h4>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr><th>È†Ü‰Ωç</th><th>ÂêçÂâç</th><th>Ë¢ñÁï™</th><th>ÁµêÊûú</th></tr>
                                        </thead>
                                        <tbody>
                        `;
                        lateResults.forEach(result => {
                            html += `
                                <tr>
                                    <td>${result.rank}</td>
                                    <td>${result.employeeName}</td>
                                    <td>${result.employeeId}</td>
                                    <td>
                                        <span class="status-badge ${result.isWinner ? 'status-winner' : 'status-waiting'}">
                                            ${result.isWinner ? 'ÂΩìÈÅ∏' : 'Ë£úÊ¨†'}
                                        </span>
                                    </td>
                                </tr>
                            `;
                        });
                        html += '</tbody></table></div></div>';
                    }
                    
                    html += '</div></div>';
                }
            });
            
            container.innerHTML = html;
        }

        // ÁÆ°ÁêÜËÄÖÁÆ°ÁêÜ„ÅÆË™≠„ÅøËæº„Åø
        function loadAdminManagement() {
            updateAdminSelectList();
            displayAdminList();
        }

        // ÁÆ°ÁêÜËÄÖÈÅ∏Êäû„É™„Çπ„Éà„ÅÆÊõ¥Êñ∞
        function updateAdminSelectList() {
            const select = document.getElementById('change-admin-id');
            select.innerHTML = '<option value="">ÁÆ°ÁêÜËÄÖ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>';
            
            Object.keys(adminUsers).forEach(adminId => {
                const option = document.createElement('option');
                option.value = adminId;
                option.textContent = adminId;
                select.appendChild(option);
            });
        }

        // ÁÆ°ÁêÜËÄÖ‰∏ÄË¶ß„ÅÆË°®Á§∫
        function displayAdminList() {
            const container = document.getElementById('admin-list');
            
            let html = '<table><thead><tr><th>ÁÆ°ÁêÜËÄÖID</th><th>ÁôªÈå≤Êó•ÊôÇ</th><th>Êìç‰Ωú</th></tr></thead><tbody>';
            
            Object.keys(adminUsers).forEach(adminId => {
                html += `
                    <tr>
                        <td>${adminId}</td>
                        <td>-</td>
                        <td>
                            <button class="btn btn-danger" onclick="deleteAdmin('${adminId}')" style="padding: 5px 10px; font-size: 0.9rem;" ${adminId === currentAdmin ? 'disabled' : ''}>
                                ÂâäÈô§
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        // ÁÆ°ÁêÜËÄÖËøΩÂä†
        function addNewAdmin() {
            const newAdminId = document.getElementById('new-admin-id').value.trim();
            const newPassword = document.getElementById('new-admin-password').value.trim();
            const confirmPassword = document.getElementById('new-admin-password-confirm').value.trim();
            
            if (!newAdminId || !newPassword || !confirmPassword) {
                alert('ÂÖ®„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('„Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            if (newPassword.length < 4) {
                alert('„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ4ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            if (adminUsers[newAdminId]) {
                alert('„Åì„ÅÆÁÆ°ÁêÜËÄÖID„ÅØÊó¢„Å´Â≠òÂú®„Åó„Åæ„Åô„ÄÇ');
                return;
            }
            
            adminUsers[newAdminId] = newPassword;
            
            document.getElementById('new-admin-id').value = '';
            document.getElementById('new-admin-password').value = '';
            document.getElementById('new-admin-password-confirm').value = '';
            
            updateAdminSelectList();
            displayAdminList();
            
            alert('ÁÆ°ÁêÜËÄÖ„ÇíËøΩÂä†„Åó„Åæ„Åó„ÅüÔºÅ');
        }

        // „Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥
        function changeAdminPassword() {
            const targetAdminId = document.getElementById('change-admin-id').value;
            const currentPassword = document.getElementById('current-password').value.trim();
            const newPassword = document.getElementById('change-new-password').value.trim();
            const confirmPassword = document.getElementById('change-new-password-confirm').value.trim();
            
            if (!targetAdminId || !currentPassword || !newPassword || !confirmPassword) {
                alert('ÂÖ®„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            if (adminUsers[targetAdminId] !== currentPassword) {
                alert('ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            if (newPassword.length < 4) {
                alert('„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ4ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            adminUsers[targetAdminId] = newPassword;
            
            document.getElementById('change-admin-id').value = '';
            document.getElementById('current-password').value = '';
            document.getElementById('change-new-password').value = '';
            document.getElementById('change-new-password-confirm').value = '';
            
            alert('„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂ§âÊõ¥„Åó„Åæ„Åó„ÅüÔºÅ');
        }

        // ÁÆ°ÁêÜËÄÖÂâäÈô§
        function deleteAdmin(adminId) {
            if (adminId === currentAdmin) {
                alert('ÁèæÂú®„É≠„Ç∞„Ç§„É≥‰∏≠„ÅÆÁÆ°ÁêÜËÄÖ„ÅØÂâäÈô§„Åß„Åç„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            if (Object.keys(adminUsers).length <= 1) {
                alert('ÁÆ°ÁêÜËÄÖ„Åå1‰∫∫„Åó„Åã„ÅÑ„Å™„ÅÑ„Åü„ÇÅÂâäÈô§„Åß„Åç„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            if (confirm(`ÁÆ°ÁêÜËÄÖ„Äå${adminId}„Äç„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`)) {
                delete adminUsers[adminId];
                updateAdminSelectList();
                displayAdminList();
                alert('ÁÆ°ÁêÜËÄÖ„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ');
            }
        }

        // „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫
        function showMessage(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }
        }
    </script>
</body>
</html>